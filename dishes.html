<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" href="icon.png" type="image/x-icon">
  <title>World Flavors</title>

  <!-- Bootstrap CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Animate.css CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  
<link rel="stylesheet" href="dishes-style.css">

</head>
<link rel="stylesheet" href="dishes-style.css">
<body>
 <!-- nav bar here -->
  <nav class="navbar navbar-expand-lg shadow-sm px-2">
    <a class="navbar-brand " href="index.html"><img id="icon" src="icon.png" alt=""/> World FlavorsðŸ¥§</a>
    <button id="btnnav" class="btn ms-3 btn-primary ms-auto"><i class="fa-solid fa-user "></i></button>
  </nav>

   <!-- Linking all pages -->
   <a href="index.html"></a>
   <a href="categories.html"></a>
   <a href="dishes.html"></a>
   <a href="ingredients.html"></a>
   <a href="recipegallery.html"></a>

  <!-- Category Buttons -->
  <div id="hbar"></div>

  
  <!-- Search Bar Below Navbar -->
<div class=" py-2">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-6">
        <form onsubmit="return false;" class="d-flex align-items-center gap-2 shadow-sm rounded px-3 py-2 bg-white">
          <input list="ctr" id="browser" class="form-control" placeholder="ðŸ” Search by Area/Country Name" autocomplete="off" onkeyup="show()" />
          <datalist id="ctr"></datalist>
        </form>
      </div>
    </div>
  </div>
</div>
  
  <!-- Meals Display -->
  <div id="box" class="container-fluid">
       
  </div>

  <!-- footer -->
<footer  style="margin-bottom: 0; margin-top: 30px;">
  <div class="copyright text-center">   
       <p>Copyright @ Pushpanjali.<i class="fa-solid fa-heart" style="color: red;"></i> Made for web-project:: Project name is "World Food Menu"</p>
  </div>
</footer>
  
</body>
<!-- JavaScript -->
  <script>
    const box = document.getElementById("box");
    const btn = document.getElementById("btn");

    // Load area list
    async function area() {
      const res = await fetch("https://www.themealdb.com/api/json/v1/1/list.php?a=list");
      const data = await res.json();
      let opt = "";
      for (let itm of data.meals) {
        opt += `<option value="${itm.strArea}">`;
      }
      document.getElementById("ctr").innerHTML = opt;
    }

    // Load categories as animated buttons
    async function categories() {
      const hbar = document.getElementById("hbar");
      const res = await fetch("https://www.themealdb.com/api/json/v1/1/list.php?c=list");
      const data = await res.json();
      for (let itm of data.meals) {
        const btn = document.createElement("button");
        btn.textContent = itm.strCategory;
        btn.classList.add("animate__animated", "animate__fadeInUp");
        btn.addEventListener("click", () => showByCategory(itm.strCategory));
        hbar.appendChild(btn);
      }
    }

    // Show meals by selected area
    async function show() {
      const val = document.getElementById("browser").value;
      if (!val) return;
      box.innerHTML = "";
      const res = await fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?a=${val}`);
      const data = await res.json();
      displayMeals(data.meals, `${val} Cuisine`);
      document.getElementById("browser").value="";
    }

    // Show meals by category
    async function showByCategory(category) {
      box.innerHTML = "";
      const res = await fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${category}`);
      const data = await res.json();
      displayMeals(data.meals, `${category} Meals`);
    }

//url of frontpage to show categories here.......
async function fromFirst() {
  const params = new URLSearchParams(window.location.search);
  const category = params.get("c");
  showByCategory(category);
}

    // Display meals as animated cards
    function displayMeals(meals, subtitle) {
      let cards = `<h2 class="animate__animated animate__fadeIn">${subtitle.toUpperCase()}</h2><div class="row g-4">`;
      for (let meal of meals) {
        cards += `
          <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="card h-100 shadow-sm animate__animated animate__zoomIn">
              <img src="${meal.strMealThumb}" class="card-img-top" alt="${meal.strMeal}">
              <div class="card-body">
                <h5 class="card-title">${meal.strMeal}</h5>
                <p class="card-text">Category name ${subtitle}</p>
                <a href="ingredients.html?mealId=${meal.idMeal}" class="btn btn-outline-primary btn-sm">See Ingredients</a>
              </div>
            </div>
          </div>`;
      }
      cards += `</div>`;
      box.innerHTML = cards;
    }

    // Initial load
  window.addEventListener("DOMContentLoaded", () => {
      fromFirst(); 
      categories();
      area();
});
  </script>

  <!-- Bootstrap Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</html>
